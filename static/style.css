:root {
      --chat-bg: var(--bs-body-bg);
      --msg-user-bg: var(--bs-primary-bg-subtle);
      --msg-bot-bg: var(--bs-secondary-bg);
      --msg-radius: 1rem;
      --sidebar-w: 320px;
    }

    body, html { height: 100%; }

    /* Layout */
    .app-shell { height: 100dvh; display: grid; grid-template-columns: var(--sidebar-w) 1fr; }
    @media (max-width: 991.98px) {
      .app-shell { grid-template-columns: 1fr; }
    }

    .sidebar { border-right: 1px solid var(--bs-border-color); overflow: hidden; }
    .sidebar-header { height: 56px; }
    .sidebar-body { height: calc(100dvh - 56px); overflow-y: auto; }

    .chat { background: var(--chat-bg); display: grid; grid-template-rows: auto 1fr auto; height: 100dvh; }
    .chat-header { border-bottom: 1px solid var(--bs-border-color); height: 56px; }

    .chat-body { position: relative; overflow-y: auto; padding: 1rem; }

    .message-list { max-width: 900px; margin-inline: auto; display: flex; flex-direction: column; gap: .75rem; }

    /* Bubbles */
    .msg { display: grid; grid-template-columns: 40px 1fr; gap: .5rem; }
    .msg .avatar { height: 40px; width: 40px; border-radius: 50%; display: grid; place-items: center; background: var(--bs-secondary-bg); color: var(--bs-secondary-color); font-weight: 600; }
    .msg .bubble { border-radius: var(--msg-radius); padding: .75rem .9rem; }

    .msg.user { grid-template-columns: 1fr 40px; }
    .msg.user .bubble { background: var(--msg-user-bg); border: 1px solid var(--bs-primary-border-subtle); }
    .msg.user .meta { text-align: right; }
    .msg.user .avatar { background: var(--bs-primary); color: #fff; }

    .msg.bot .bubble { background: var(--msg-bot-bg); border: 1px solid var(--bs-border-color); }

    .msg .meta { font-size: .75rem; color: var(--bs-secondary-color); margin-top: .25rem; }

    /* Composer */
    .chat-composer { border-top: 1px solid var(--bs-border-color); padding: .75rem; background: var(--bs-body-bg); position: sticky; bottom: 0; }
    .composer-inner { max-width: 900px; margin-inline: auto; }
    .composer-toolbar { gap: .5rem; }
    .autogrow { resize: none; max-height: 180px; overflow: auto; }

    /* Typing dots */
    .typing { display: inline-flex; align-items: center; gap: .25rem; }
    .typing .dot { width: 6px; height: 6px; border-radius: 50%; background: var(--bs-secondary-color); animation: blink 1.2s infinite ease-in-out; }
    .typing .dot:nth-child(2){ animation-delay: .2s }
    .typing .dot:nth-child(3){ animation-delay: .4s }
    @keyframes blink { 0%, 80%, 100% { opacity: .2 } 40% { opacity: 1 } }

    /* Utilities */
    .scroll-shadow-top { box-shadow: inset 0 8px 8px -8px rgba(0,0,0,.15); }
    .scroll-shadow-bottom { box-shadow: inset 0 -8px 8px -8px rgba(0,0,0,.15); }

    /* Message actions */
    .bubble:hover .msg-actions { opacity: 1; }
    .msg-actions { opacity: 0; transition: opacity .15s linear; }

    /* Compact list items */
    .list-group-item { cursor: pointer; }
    .list-group-item:hover { background: var(--bs-secondary-bg); }